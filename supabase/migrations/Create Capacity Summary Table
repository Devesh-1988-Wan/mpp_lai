CREATE TABLE IF NOT EXISTS public.capacity_summary (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    team_member TEXT NOT NULL,
    days_worked NUMERIC NOT NULL,
    man_hours NUMERIC NOT NULL,
    capacity_80_percent NUMERIC NOT NULL,
    total_team_capacity NUMERIC,
    estimated_usage NUMERIC,
    remaining_capacity NUMERIC,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

ALTER TABLE public.capacity_summary ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Allow authenticated users to view capacity summaries" ON public.capacity_summary FOR SELECT TO authenticated USING (true);
CREATE POLICY "Allow authenticated users to insert capacity summaries" ON public.capacity_summary FOR INSERT TO authenticated WITH CHECK (true);
CREATE POLICY "Allow authenticated users to update capacity summaries" ON public.capacity_summary FOR UPDATE TO authenticated USING (true) WITH CHECK (true);
CREATE POLICY "Allow authenticated users to delete capacity summaries" ON public.capacity_summary FOR DELETE TO authenticated USING (true);
